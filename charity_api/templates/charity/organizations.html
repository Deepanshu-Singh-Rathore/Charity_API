{% extends 'charity/base.html' %}

{% block title %}Organizations - Charity Hub{% endblock %}

{% block content %}
<section class="hero" style="padding: 3rem 2rem;">
    <h1><i class="fas fa-building"></i> Partner Organizations</h1>
    <p>Meet the organizations dedicated to making a positive impact</p>
</section>

<div class="container">
    <div class="section-title">
        <h2>All Organizations</h2>
        <p>Trusted partners working towards meaningful change</p>
    </div>

    <div id="orgs-loading" class="loading">
        <div class="spinner"></div>
        <p>Loading organizations...</p>
    </div>

    <div id="orgs-grid" class="card-grid" style="display: none;"></div>
    
    <div id="no-orgs" style="display: none; text-align: center; padding: 3rem;">
        <i class="fas fa-building" style="font-size: 4rem; color: #ddd; margin-bottom: 1rem;"></i>
        <h3>No Organizations Yet</h3>
        <p>Check back soon for partner organizations!</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    $.get('/api/organizations/', function(data) {
        $('#orgs-loading').hide();
        
        const orgs = data.results || [];
        
        if (orgs.length === 0) {
            $('#no-orgs').show();
            return;
        }

        $('#orgs-grid').show();

        orgs.forEach(org => {
            const card = `
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-building"></i> ${org.name}</h3>
                        ${org.is_active ? '<span class="badge badge-success">ACTIVE</span>' : '<span class="badge badge-danger">INACTIVE</span>'}
                    </div>
                    <div class="card-body">
                        <p style="min-height: 80px;">${org.description}</p>
                        <hr>
                        <p><i class="fas fa-envelope"></i> <a href="mailto:${org.email}">${org.email}</a></p>
                        ${org.phone ? `<p><i class="fas fa-phone"></i> ${org.phone}</p>` : ''}
                        ${org.address ? `<p><i class="fas fa-map-marker-alt"></i> ${org.address}</p>` : ''}
                        ${org.website ? `<p><i class="fas fa-globe"></i> <a href="${org.website}" target="_blank" rel="noopener">Visit Website</a></p>` : ''}
                        ${org.registration_number ? `<p><i class="fas fa-id-card"></i> Reg: ${org.registration_number}</p>` : ''}
                    </div>
                    <div class="card-footer">
                        <p><i class="fas fa-bullhorn"></i> Running ${org.campaign_count} campaign${org.campaign_count !== 1 ? 's' : ''}</p>
                        ${org.established_date ? `<p><i class="far fa-calendar"></i> Established ${org.established_date}</p>` : ''}
                    </div>
                </div>
            `;
            $('#orgs-grid').append(card);
        });
    });
});
</script>
{% endblock %}
